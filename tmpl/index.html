<!DOCTYPE html>
<html>
  <head>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/static/main.css" />
    <title>Home</title>

  </head>
  <body style="background-color:#046A38;">
  <img src="https://i.imgur.com/rsoPQv9.gif" width="200" height="150"/>
  <div class="navbar">
    <a href="/">Home</a>
    <a href="information">Information</a>
    <div class="dropdown">
      <button class="dropbtn" onclick="myFunction()">Menu
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content" id="myDropdown">
        <a href="signin">Sign in</a>
        <a href="/upload">Upload</a>
      </div>
    </div>
  </div>

    <!--
    <a href="http://localhost:8000/upload"> Upload</a>
    -->
    <br />
    <h1 style="color:#B9975B;"> Video List</h1>
    <br />
    <div id = "videoList">

    </div>

    <script>
        setInterval(function(){
        var videoList = document.getElementById("videoList")
        var xhr = new XMLHttpRequest();
        xhr.responseType = 'json';
        xhr.onreadystatechange = function() {
          if (xhr.readyState === 4) {
            console.log(xhr.response.VideoNames);
            var htmlString = "<ul>";
            xhr.response.VideoNames.forEach(function (value, i) {
              var link = "<a href= http://localhost:8000/watch/" + i + ">" + value + "</>";
              htmlString += ("<li>" + link + "</li>");
          });
   
            htmlString += "</ul>";
            console.log(htmlString);
            videoList.innerHTML = htmlString;
          }
        }
        xhr.open("GET", "http://localhost:8080/")
        xhr.send('');
        },500);
      </script>
    <script>
      /* When the user clicks on the button,
      toggle between hiding and showing the dropdown content */
      function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
      }

      // Close the dropdown if the user clicks outside of it
      window.onclick = function(e) {
        if (!e.target.matches('.dropbtn')) {
          var myDropdown = document.getElementById("myDropdown");
          if (myDropdown.classList.contains('show')) {
            myDropdown.classList.remove('show');
          }
        }
      }
    </script>
  </body>
</html>